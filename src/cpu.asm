;==========================================================================================================
;----------------------------------------------------------------------------------------------------------
;
;                                      MOS 6502 processor simulator
;
;                                                   by
;
;                                            Code Monkey King
;
;----------------------------------------------------------------------------------------------------------
;==========================================================================================================
[bits 16]                                                   ; assemble 16-bit code
[org 0x0000]                                                ; local variable offset
;==========================================================================================================
;                                            GLOBAL DEFINITIONS
;==========================================================================================================
%define          PROCEDURES 0x7e00                          ; global procedures address
%define        clear_screen 0x0004                          ; clear screen procedure local offset
%define        print_string 0x0016                          ; print string procedure local offset
%define        hex_to_ascii 0x0026                          ; hex to ascii procedure local offset
;==========================================================================================================
;                                                  CPU
;==========================================================================================================
start:                  mov ax, cs                          ; init AX (BOOTSECTOR)
                        mov ds, ax                          ; hook up local variable addresses
                        call PROCEDURES:clear_screen        ; init 40 x 25 text video mode
;----------------------------------------------------------------------------------------------------------








jmp $
;==========================================================================================================
;                                               REGISTERS
;==========================================================================================================
register_a              db 0                                ; register A
register_x              db 0                                ; register B
register_y              db 0                                ; register C
register_p              db 0x20                             ; processor flags (NV-BDIZC)
stack_pointer           db 0xff                             ; stack pointer points to 0x01FF
program_counter         dw 0xfffc                           ; program machine code starts here
;---------------------------------------------------------------------------------------------------------
                        times 512 - ($-$$) db 0x00          ; BIOS bytes padding
;=========================================================================================================
